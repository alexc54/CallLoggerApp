{% extends "base.html" %}
{% block title %}Call Logger Record{% endblock %}

{% block content %}
<h1 align="center">Call Logger Records</h1>
<table class="table">
    <thead>
        <tr>
            <th>Call ID</th>
            <th>Customer Name</th>
            <th>Account Number</th>
            <th>Postcode</th>
            <th>Reason for Call</th>
            <th>Date/Time of Call</th>
            <th>Employee</th>
            {% if current_user.is_admin %}
            <th>Modify</th>
            {% endif %}
            
        </tr>
    </thead>
    <tbody>
        {% for customer in customers %}
        <tr>
            <td>{{ customer.id }}</td>
            <td>{{ customer.customer_name | title }}</td>
            <td>{{ customer.account_number }}</td>
            <td>{{ customer.postcode  | upper }}</td>
            <td>{{ customer.reason_called }}</td>
            <td>{{ customer.date.strftime('%d-%m-%Y %H:%M:%S') }}</td>
            <td>{{ customer.user.first_name | title }} {{ customer.user.last_name | title }}</td> <!-- Access user data -->
            <td> <!-- Edit option -->
                 <a href="{{ url_for('views.edit_call', id=customer.id) }}">
                 <i class="bi bi-pencil-fill"></i>
                </a>    
                <!-- Delete option (only appears if user is logged in as admin) -->        
        {% if current_user.is_admin %}
            <a href="{{ url_for('views.delete', id=customer.id) }}"><i class="bi bi-trash-fill"></i></a>            
        {% endif %}
           </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
